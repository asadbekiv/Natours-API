{"mappings":"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","sources":["<anon>","public/js/index.js","public/js/login.js","public/js/alert.js","public/js/signup.js","public/js/updateSettings.js","public/js/stripe.js"],"sourcesContent":["// const { login, logout } = require('./login.js');\nvar $32cb4da72f922b71$exports = {};\n// const axios = require('axios');\nvar $fe64213990bdc8c8$exports = {};\nconst $fe64213990bdc8c8$var$hideAlert = ()=>{\n    const el = document.querySelector(\".alert\");\n    if (el) el.parentElement.removeChild(el);\n};\n// type is 'success' or 'error'\nconst $fe64213990bdc8c8$var$showAlert = (type, msg, time = 8)=>{\n    $fe64213990bdc8c8$var$hideAlert();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector(\"body\").insertAdjacentHTML(\"afterbegin\", markup);\n    window.setTimeout($fe64213990bdc8c8$var$hideAlert, time * 1000);\n};\n$fe64213990bdc8c8$exports = $fe64213990bdc8c8$var$showAlert;\n\n\n// import { showAlert } from './alert';\nconst $32cb4da72f922b71$var$login = async (email, password)=>{\n    console.log(\"Login initiated with:\", email, password);\n    try {\n        const response = await fetch(\"/api/v1/users/login\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email: email,\n                password: password\n            })\n        });\n        const result = await response.json();\n        console.log(result);\n        if (response.ok /*&& result.status === 'success'*/ ) {\n            $fe64213990bdc8c8$exports(\"success\", \"Logged in successfully!\");\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 1500);\n        } else $fe64213990bdc8c8$exports(\"error\", result.message);\n    } catch (err) {\n        console.error(\"Fetch error:\", err);\n        $fe64213990bdc8c8$exports(\"error\", \"An error occurred\");\n    }\n};\nconst $32cb4da72f922b71$var$logout = async ()=>{\n    console.log(\"Logout initiated\");\n    try {\n        const response = await fetch(\"/api/v1/users/logout\", {\n            method: \"GET\"\n        });\n        const result = await response.json();\n        if (response.ok && result.status === \"success\") location.reload(true);\n        else $fe64213990bdc8c8$exports(\"error\", \"Logout failed\");\n    } catch (err) {\n        console.error(\"Fetch error:\", err);\n        $fe64213990bdc8c8$exports(\"error\", \"Error logging out => try again later!\");\n    }\n};\n$32cb4da72f922b71$exports = {\n    login: $32cb4da72f922b71$var$login,\n    logout: $32cb4da72f922b71$var$logout\n};\n\n\nvar $013039cee5465195$require$login = $32cb4da72f922b71$exports.login;\nvar $013039cee5465195$require$logout = $32cb4da72f922b71$exports.logout;\nvar $da73a5b0718e4064$exports = {};\n\nconst $da73a5b0718e4064$var$signup = async (firstName, email, password, passwordConfirm)=>{\n    try {\n        const res = await fetch(\"/api/v1/users/signup\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                name: firstName,\n                email: email,\n                password: password,\n                passwordConfirm: passwordConfirm\n            })\n        });\n        const result = await res.json();\n        // console.log(result);\n        if (res.ok) {\n            $fe64213990bdc8c8$exports(\"success\", \"Account created successfully!\");\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 1500);\n        } else $fe64213990bdc8c8$exports(\"error\", result.message);\n    } catch (error) {\n        console.error(\"Fetch error:\", error);\n        $fe64213990bdc8c8$exports(\"error\", \"An error occurred\");\n    }\n};\n$da73a5b0718e4064$exports = $da73a5b0718e4064$var$signup;\n\n\nvar $64c13fb7d674be88$exports = {};\n// const axios = require('axios');\n\n// import { showAlert } from \"./alert\";\nconst $64c13fb7d674be88$var$updateSettings = async (data, type)=>{\n    try {\n        const url = type === \"password\" ? \"/api/v1/users/updateMyPassword\" : \"/api/v1/users/updateMe\";\n        const options = {\n            method: \"PATCH\",\n            body: data\n        };\n        // If the data is not FormData, set headers for JSON\n        if (!(data instanceof FormData)) {\n            options.headers = {\n                \"Content-Type\": \"application/json\"\n            };\n            options.body = JSON.stringify(data);\n        }\n        const response = await fetch(url, options);\n        const result = await response.json();\n        if (response.ok && result.status === \"success\") {\n            $fe64213990bdc8c8$exports(\"success\", `${type.charAt(0).toUpperCase() + type.slice(1)} updated successfully`);\n            window.setTimeout(()=>{\n                location.assign(\"/me\");\n            }, 1500);\n        } else $fe64213990bdc8c8$exports(\"error\", result.message || \"Something went wrong\");\n    } catch (err) {\n        console.error(\"Fetch error:\", err);\n        $fe64213990bdc8c8$exports(\"error\", \"Something went wrong\");\n    }\n};\n$64c13fb7d674be88$exports = $64c13fb7d674be88$var$updateSettings;\n\n\nvar $758b95d2edc775f8$exports = {};\n// const Stripe = require('stripe');\n\nconst $758b95d2edc775f8$var$bookTour = async (tourId)=>{\n    try {\n        const stripe = Stripe(\"pk_test_51PgObBByYH3XmrRBBl0CvF5uO0nI00oLcJmrXvJf7v3BysfmP61ocP6MeEZZy765iQlw7ICM8vT47ateDSMVZWfb00hTJXDfNb\");\n        // Get checkout session from the API\n        const res = await fetch(`/api/v1/bookings/checkout-session/${tourId}`, {\n            method: \"GET\"\n        }).then(function(respone) {\n            return respone.json();\n        });\n        // console.log(res);\n        // Redirect to checkout with Stripe\n        await stripe.redirectToCheckout({\n            sessionId: res.session.id\n        });\n    } catch (error) {\n        console.error(\"Error:\", error);\n        $fe64213990bdc8c8$exports(\"Error happened!\", error.message);\n    }\n};\n$758b95d2edc775f8$exports = $758b95d2edc775f8$var$bookTour;\n\n\n\nconst $013039cee5465195$var$logOutBtn = document.querySelector(\".nav__el--logout\");\nconst $013039cee5465195$var$signupForm = document.querySelector(\".form--signup\");\nconst $013039cee5465195$var$loginForm = document.querySelector(\".form--login\");\nconst $013039cee5465195$var$userDataForm = document.querySelector(\".form-user-data\");\nconst $013039cee5465195$var$userPasswordForm = document.querySelector(\".form-user-password\");\nconst $013039cee5465195$var$bookBtn = document.getElementById(\"book-tour\");\nif ($013039cee5465195$var$loginForm) $013039cee5465195$var$loginForm.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    $013039cee5465195$require$login(email, password);\n});\nif ($013039cee5465195$var$signupForm) $013039cee5465195$var$signupForm.addEventListener(\"submit\", async (e)=>{\n    const submitButton = document.querySelector(\".btn--save\");\n    if (submitButton) {\n        submitButton.textContent = \"Creating...\";\n        submitButton.disabled = true;\n    }\n    e.preventDefault();\n    const name = document.getElementById(\"name\").value;\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"passwordConfirm\").value;\n    try {\n        await $da73a5b0718e4064$exports(name, email, password, passwordConfirm);\n        // Reset form fields after successful signup\n        $013039cee5465195$var$signupForm.reset();\n    } catch (error) {\n        console.error(\"Error during signup:\", error);\n    } finally{\n        if (submitButton) {\n            submitButton.textContent = \"Sign up\";\n            submitButton.disabled = false;\n        }\n    }\n});\nif ($013039cee5465195$var$logOutBtn) $013039cee5465195$var$logOutBtn.addEventListener(\"click\", $013039cee5465195$require$logout);\nif ($013039cee5465195$var$userDataForm) $013039cee5465195$var$userDataForm.addEventListener(\"submit\", async (e)=>{\n    e.preventDefault();\n    document.querySelector(\".btn--save \").textContent = \"Saving ...\";\n    const form = new FormData();\n    form.append(\"name\", document.getElementById(\"name\").value);\n    form.append(\"email\", document.getElementById(\"email\").value);\n    form.append(\"photo\", document.getElementById(\"photo\").files[0]);\n    await $64c13fb7d674be88$exports(form, \"data\");\n    document.querySelector(\".btn--save \").textContent = \"Save Settings\";\n});\nif ($013039cee5465195$var$userPasswordForm) $013039cee5465195$var$userPasswordForm.addEventListener(\"submit\", async (e)=>{\n    e.preventDefault();\n    document.querySelector(\".btn--save-password\").textContent = \"Updating,waite ...\";\n    // Added missing semicolons and fixed declaration syntax\n    const passwordCurrent = document.getElementById(\"password-current\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"password-confirm\").value;\n    await $64c13fb7d674be88$exports({\n        passwordCurrent: passwordCurrent,\n        password: password,\n        passwordConfirm: passwordConfirm\n    }, \"password\");\n    document.querySelector(\".btn--save-password\").textContent = \"Save password\";\n    document.getElementById(\"password-current\").value = \"\";\n    document.getElementById(\"password\").value = \"\";\n    document.getElementById(\"password-confirm\").value = \"\";\n});\nif ($013039cee5465195$var$bookBtn) $013039cee5465195$var$bookBtn.addEventListener(\"click\", async (e)=>{\n    const button = e.target;\n    button.textContent = `Processing.... `;\n    button.disabled = true;\n    const { tourId: tourId } = button.dataset;\n    try {\n        await $758b95d2edc775f8$exports(tourId);\n        button.textContent = \"Booked\";\n    } catch (error) {\n        button.textContent = \"Try Again\";\n        $fe64213990bdc8c8$exports(\"Booking Failed\", error.message);\n        console.error(error);\n    } finally{\n        button.disabled = false;\n    }\n});\nconst $013039cee5465195$var$alertMessage = document.querySelector(\"body\").dataset.alert;\nif ($013039cee5465195$var$alertMessage) $fe64213990bdc8c8$exports(\"success\", $013039cee5465195$var$alertMessage, 20);\n\n\n//# sourceMappingURL=index.js.map\n","// const { login, logout } = require('./login.js');\nconst { login, logout } = require('./login.js');\nconst signup = require('./signup.js');\nconst updateSettings = require('./updateSettings.js');\nconst bookTour = require('./stripe.js');\nconst showAlert = require('./alert.js');\n\nconst logOutBtn = document.querySelector('.nav__el--logout');\nconst signupForm = document.querySelector('.form--signup');\nconst loginForm = document.querySelector('.form--login');\nconst userDataForm = document.querySelector('.form-user-data');\nconst userPasswordForm = document.querySelector('.form-user-password');\nconst bookBtn = document.getElementById('book-tour');\n\nif (loginForm) {\n  loginForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n}\n\nif (signupForm) {\n  signupForm.addEventListener('submit', async (e) => {\n    const submitButton = document.querySelector('.btn--save');\n    if (submitButton) {\n      submitButton.textContent = 'Creating...';\n      submitButton.disabled = true;\n    }\n    e.preventDefault();\n    const name = document.getElementById('name').value;\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('passwordConfirm').value;\n    try {\n      await signup(name, email, password, passwordConfirm);\n\n      // Reset form fields after successful signup\n      signupForm.reset();\n    } catch (error) {\n      console.error('Error during signup:', error);\n    } finally {\n      if (submitButton) {\n        submitButton.textContent = 'Sign up';\n        submitButton.disabled = false;\n      }\n    }\n  });\n}\n\nif (logOutBtn) {\n  logOutBtn.addEventListener('click', logout);\n}\n\nif (userDataForm) {\n  userDataForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    document.querySelector('.btn--save ').textContent = 'Saving ...';\n    const form = new FormData();\n    form.append('name', document.getElementById('name').value);\n    form.append('email', document.getElementById('email').value);\n    form.append('photo', document.getElementById('photo').files[0]);\n\n    await updateSettings(form, 'data');\n\n    document.querySelector('.btn--save ').textContent = 'Save Settings';\n  });\n}\n\nif (userPasswordForm) {\n  userPasswordForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    document.querySelector('.btn--save-password').textContent =\n      'Updating,waite ...';\n    // Added missing semicolons and fixed declaration syntax\n    const passwordCurrent = document.getElementById('password-current').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    await updateSettings(\n      { passwordCurrent, password, passwordConfirm },\n      'password',\n    );\n    document.querySelector('.btn--save-password').textContent = 'Save password';\n    document.getElementById('password-current').value = '';\n    document.getElementById('password').value = '';\n    document.getElementById('password-confirm').value = '';\n  });\n}\n\nif (bookBtn) {\n  bookBtn.addEventListener('click', async (e) => {\n    const button = e.target;\n    button.textContent = `Processing.... `;\n    button.disabled = true;\n    const { tourId } = button.dataset;\n\n    try {\n      await bookTour(tourId);\n      button.textContent = 'Booked';\n    } catch (error) {\n      button.textContent = 'Try Again';\n      showAlert('Booking Failed', error.message);\n      console.error(error);\n    } finally {\n      button.disabled = false;\n    }\n  });\n}\n\nconst alertMessage = document.querySelector('body').dataset.alert;\nif (alertMessage) showAlert('success', alertMessage, 20);\n","// const axios = require('axios');\nconst showAlert = require('./alert.js');\n// import { showAlert } from './alert';\n\nconst login = async (email, password) => {\n  console.log('Login initiated with:', email, password);\n  try {\n    const response = await fetch('/api/v1/users/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password,\n      }),\n    });\n\n    const result = await response.json();\n    console.log(result);\n\n    if (response.ok /*&& result.status === 'success'*/) {\n      showAlert('success', 'Logged in successfully!');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    } else {\n      showAlert('error', result.message);\n    }\n  } catch (err) {\n    console.error('Fetch error:', err);\n    showAlert('error', 'An error occurred');\n  }\n};\n\nconst logout = async () => {\n  console.log('Logout initiated');\n  try {\n    const response = await fetch('/api/v1/users/logout', {\n      method: 'GET',\n    });\n\n    const result = await response.json();\n\n    if (response.ok && result.status === 'success') {\n      location.reload(true);\n    } else {\n      showAlert('error', 'Logout failed');\n    }\n  } catch (err) {\n    console.error('Fetch error:', err);\n    showAlert('error', 'Error logging out => try again later!');\n  }\n};\n\nmodule.exports = { login, logout };\n","const hideAlert = () => {\n  const el = document.querySelector('.alert');\n  if (el) el.parentElement.removeChild(el);\n};\n\n// type is 'success' or 'error'\nconst showAlert = (type, msg, time = 8) => {\n  hideAlert();\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  window.setTimeout(hideAlert, time * 1000);\n};\nmodule.exports = showAlert;\n","const showAlert = require('./alert.js');\n\nconst signup = async (firstName, email, password, passwordConfirm) => {\n  try {\n    const res = await fetch('/api/v1/users/signup', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        name: firstName,\n        email: email,\n        password: password,\n        passwordConfirm: passwordConfirm,\n      }),\n    });\n    const result = await res.json();\n    // console.log(result);\n\n    if (res.ok) {\n      showAlert('success', 'Account created successfully!');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    } else {\n      showAlert('error', result.message);\n    }\n  } catch (error) {\n    console.error('Fetch error:', error);\n    showAlert('error', 'An error occurred');\n  }\n};\n\nmodule.exports = signup;\n","// const axios = require('axios');\nconst showAlert = require('./alert.js');\n// import { showAlert } from \"./alert\";\n\nconst updateSettings = async (data, type) => {\n  try {\n    const url =\n      type === 'password'\n        ? '/api/v1/users/updateMyPassword'\n        : '/api/v1/users/updateMe';\n\n    const options = {\n      method: 'PATCH',\n      body: data,\n    };\n\n    // If the data is not FormData, set headers for JSON\n    if (!(data instanceof FormData)) {\n      options.headers = {\n        'Content-Type': 'application/json',\n      };\n      options.body = JSON.stringify(data);\n    }\n\n    const response = await fetch(url, options);\n    const result = await response.json();\n\n    if (response.ok && result.status === 'success') {\n      showAlert(\n        'success',\n        `${type.charAt(0).toUpperCase() + type.slice(1)} updated successfully`,\n      );\n      window.setTimeout(() => {\n        location.assign('/me');\n      }, 1500);\n    } else {\n      showAlert('error', result.message || 'Something went wrong');\n    }\n  } catch (err) {\n    console.error('Fetch error:', err);\n    showAlert('error', 'Something went wrong');\n  }\n};\n\nmodule.exports = updateSettings;\n","// const Stripe = require('stripe');\nconst showAlert = require('./alert.js');\n\nconst bookTour = async (tourId) => {\n  try {\n    const stripe = Stripe(\n      'pk_test_51PgObBByYH3XmrRBBl0CvF5uO0nI00oLcJmrXvJf7v3BysfmP61ocP6MeEZZy765iQlw7ICM8vT47ateDSMVZWfb00hTJXDfNb',\n    );\n    // Get checkout session from the API\n    const res = await fetch(\n      `/api/v1/bookings/checkout-session/${tourId}`,\n      {\n        method: 'GET',\n      },\n    ).then(function (respone) {\n      return respone.json();\n    });\n  \n    // console.log(res);\n\n    // Redirect to checkout with Stripe\n    await stripe.redirectToCheckout({\n      sessionId: res.session.id,\n    });\n  } catch (error) {\n    console.error('Error:', error);\n    showAlert('Error happened!', error.message);\n  }\n};\n\nmodule.exports = bookTour;\n"],"names":["$32cb4da72f922b71$exports","$fe64213990bdc8c8$exports","$fe64213990bdc8c8$var$hideAlert","el","document","querySelector","parentElement","removeChild","type","msg","time","markup","insertAdjacentHTML","window","setTimeout","$013039cee5465195$require$login","login","email","password","console","log","response","fetch","method","headers","body","JSON","stringify","result","json","ok","location","assign","message","err","error","logout","status","reload","$013039cee5465195$require$logout","$da73a5b0718e4064$exports","firstName","passwordConfirm","res","name","$64c13fb7d674be88$exports","data","url","options","FormData","charAt","toUpperCase","slice","$758b95d2edc775f8$exports","tourId","stripe","Stripe","then","respone","redirectToCheckout","sessionId","session","id","$013039cee5465195$var$logOutBtn","$013039cee5465195$var$signupForm","$013039cee5465195$var$loginForm","$013039cee5465195$var$userDataForm","$013039cee5465195$var$userPasswordForm","$013039cee5465195$var$bookBtn","getElementById","addEventListener","e","preventDefault","value","submitButton","textContent","disabled","reset","form","append","files","passwordCurrent","button","target","dataset","$013039cee5465195$var$alertMessage","alert"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}